# 【EK】fm33_mp3_lvgl

> 本项目为复微杯参赛作品
> 键盘使用模块化设计，上层为屏幕板，下层核心板，同时带有一个录音咪头小板
>
> **本仓库资料内容包括：**
>
> * MP3本体硬件设计的3块PCB设计源文件，提供立创EDA专业版的文件格式与ad24兼容格式（新版已优化整合）
> * MP3本体的固件源码
> * MP3外观3d打印模型
> * 开发报告与BOM表

> **键盘功能演示可以参考：**
> * " .../Video/测试视频 "
--- 

## 1. 项目架构
 > * mf_config         移植配置与初始化接口
 > * User              底层驱动代码
 > * Gui               页面ui设计
 > **---**homepage     软件选择主页
 > **---**APP          软件主页
 > **---**style        统一配色架构
 > * mooncake_handler  统一调度页面框架

--- 

## 2. 项目说明

### 1.0 更新说明：
**25.6.2更新**
* 修改时钟刷新逻辑，单纯tim1_IRQHandler回调会导致卡死。

  > * 主体增加图片显示功能
  > * 已对接CF_TURE_COLOR_ALPHA文件，可以实现格式下.bin格式图片的显示

### 1.1 更新说明：
**25.6.3更新**
* 修改主体结构，屏幕调度页面独立移动至mooncake_handler（软件生命周期调度管理器开发中）
* 修改播放器代码，删减换歌曲初始化音量导致音量控制失效的bug

### 1.2 更新说明：
**25.6.2更新**
* 修改录音回调逻辑，优化代码，降低底噪
 > * 打开项目代码文件的时候记得移出文件夹，提交时的中文命名路径会有潜在问题

#### 1.2.6 hardware
提供了立创版本的原工程，导入后可以打开四个文件项目，其中包括一代二代pcb，一代除了屏幕tf卡没有其他外设
提供了AD版本工程
#### 1.2.6 software
`_Release`文件夹里是预编译好的bin文件,可以直接烧录下载
`mp3_lvgl_fw_v1.2`提供了原工程文件当前版本
同样提供了老版本开发文件，有需要最早1.0版本之前开发版可以联系
#### 1.2.6 tools
这里面有一个字符c数组转bin文件的工具软件
#### 1.2.6 docs
开发报告与BOM保存在这里
#### 1.2.6 video
演示视频
#### 1.2.6 testfile
测试文件就是tf卡里面存的内容
### 1.2.7 model
外壳模型文件(开发中)

### 1.3.0 更新说明：
**25.7.27更新**
* 优化底层驱动，提高刷新率，更换ips屏幕，优化显示色彩
* 重构整合硬件全局，整合到单块pcb
* 重构电源管理，使用axp2101 pmic集成管理电源
* 添加flash字库，新增支持中文，支持超长文本，实时动态管理内存
* 采用异步调度实现音乐播放同时刷新图片显示，支持歌曲专辑封面显示
* 优化智能分页算法，优化支持中英文以及各种特殊符号同时出现时的显示分页
* 简单绘制外壳，支持3d打印，建议尼龙激光烧结，提高韧性
* 添加bmp解码器，优化解码加载算法
    > * tool中新增处理文本空白行的脚本，主要处理很多轻小说空白行过多导致文本冗余，显示效率低，不经过处理也可以正常阅读，但是可读性和体验会变差
    > * 修改麦克风收音，现已支持带有麦克风的四段式有线耳机的录音，取消原有的咪头拾音，优化集成度
    > * 修改增加板载按键，支持休眠，关闭屏幕，支持低功耗待机，估算可以亮屏播放音乐实现50小时左右的续航，休眠后功耗低于0.1w
 